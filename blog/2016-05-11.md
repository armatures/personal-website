title: Generator performance for lists and tuples
language: python3
---

## Time complexity
```shell
python3 -m timeit "list(0 for _ in range(100))"
```
```
100000 loops, best of 3: 13.1 usec per loop
```
```
python3 -m timeit "tuple(0 for _ in range(100))"
```
```
100000 loops, best of 3: 13.4 usec per loop
```

## Space complexity
```python3
import tracemalloc
tracemalloc.start()
n = 1000000
b = list(0 for _ in range(n))
a = tuple(0 for _ in range(n))

snapshot = tracemalloc.take_snapshot()
for stat in snapshot.statistics('lineno'):
    print(stat)
```
```
<stdin>:4: size=8057 KiB, count=2, average=4028 KiB
<stdin>:5: size=7813 KiB, count=2, average=3907 KiB
```
Creating a tuple from a generator results in a smaller memory footprint

## Generating a tuple from a generator function or generator expression
```shell
python3 -m timeit "tuple(0 for _ in range(100))"
```
```
100000 loops, best of 3: 13.4 usec per loop
```

```shell
python3 -m timeit -s "def gen():
    for _ in range(100):
        yield 0" "tuple(gen())"
```
```
100000 loops, best of 3: 12 usec per loop
```

The difference is negligible

## List Comprehensions vs. Generator Expressions
```python3
import dis

def gen_a():
    [0 for _ in range(n)]

def gen_b():
    (0 for _ in range(n))

print("gen_a\n")
dis.dis(gen_a)
print("\ngen_b\n")
dis.dis(gen_b)
```
```
gen_a

 13           0 LOAD_CONST               1 (<code object <listcomp> at ...)
              3 LOAD_CONST               2 ('gen_a.<locals>.<listcomp>')
              6 MAKE_FUNCTION            0
              9 LOAD_GLOBAL              0 (range)
             12 LOAD_GLOBAL              1 (n)
             15 CALL_FUNCTION            1 (1 positional, 0 keyword pair)
             18 GET_ITER
             19 CALL_FUNCTION            1 (1 positional, 0 keyword pair)
             22 POP_TOP
             23 LOAD_CONST               0 (None)
             26 RETURN_VALUE

gen_b

 16           0 LOAD_CONST               1 (<code object <genexpr> at ...)
              3 LOAD_CONST               2 ('gen_b.<locals>.<genexpr>')
              6 MAKE_FUNCTION            0
              9 LOAD_GLOBAL              0 (range)
             12 LOAD_GLOBAL              1 (n)
             15 CALL_FUNCTION            1 (1 positional, 0 keyword pair)
             18 GET_ITER
             19 CALL_FUNCTION            1 (1 positional, 0 keyword pair)
             22 POP_TOP
             23 LOAD_CONST               0 (None)
             26 RETURN_VALUE
```
